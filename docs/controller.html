<html>
  <head>
    <title> Kiwi - docs - Controller </title>
  </head>
  <body>
    <h1> Kiwi Documentation (v. 0.1.0)</h1>
    <hr>
    <a href='index.html'>Index</a>
    <h2> The Controller </h2>
    Once a request has been initiated by one of the views listeners it is the controller's job to fire the appropriate http request (by means of a <a href='model.html'>model</a> call) and decide what happens to the data that is returned. The controller will also collect from the DOM any data that needs to get sent to the server.
    <h2> Defining a Controller</h2>
    Defining a controller is very similar to defining a view. We use the $c function which takes as arguments the name of the controller and an object with action names as keys and functions as values. For example:</p>
      <pre>   $c('MyController', {
          'an_action': function(){
            $m.MyModel.find('all', {limit: 10}, this.continue_to('follow_up_action'))
          },
          
          'follow_up_action' : function(){
            var models = this.data
            $m.MyModel.find(data[0].id).destroy(this.publish)
          },
          
          'another_action': function(){
            $m.MyModel.find(this.model_id, this.publish)
          },
          
          'create_action': function(){
            var data = {
              name: $('#name, this.view.node).text()
              bio: $('#bio', this.view.node).text()
            }
            $m.MyModel.create(data, this.publish)
          }
      })
      </pre>
    <p>As you can see controller actions tend to be thin wrappers around model calls. It is also important to note that there should only be one model call per individual action, otherwise unpredictable behavior will ensue.
